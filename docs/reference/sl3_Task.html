<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Define a Machine Learning Task — sl3_Task • sl3</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Define a Machine Learning Task — sl3_Task"><meta property="og:description" content="An increasingly thick wrapper around a data.table
containing the data for a prediction task. This contains metadata about the
particular machine learning problem, including which variables are to be
used as covariates and outcomes."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115145808-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115145808-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sl3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="https://tlverse.org" class="external-link">tlverse</a>
</li>
<li>
  <a href="../index.html">sl3</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro_sl3.html">Intro to sl3</a>
    </li>
    <li>
      <a href="../articles/SuperLearner_benchmarks.html">sl3 Benchmarks</a>
    </li>
    <li>
      <a href="../slides/sl3-slides.html">sl3 Presentation</a>
    </li>
    <li>
      <a href="../articles/custom_lrnrs.html">Defining Custom sl3 Learners</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/tlverse/sl3/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define a Machine Learning Task</h1>
    <small class="dont-index">Source: <a href="https://github.com/tlverse/sl3/blob/HEAD/R/sl3_Task.R" class="external-link"><code>R/sl3_Task.R</code></a></small>
    <div class="hidden name"><code>sl3_Task.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>An increasingly thick wrapper around a <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>
containing the data for a prediction task. This contains metadata about the
particular machine learning problem, including which variables are to be
used as covariates and outcomes.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">make_sl3_Task</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="format">
    <h2>Format</h2>
    <p><code>R6Class</code> object.</p>
    </div>
    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>...</dt>
<dd><p>Passes all arguments to the constructor. See documentation for
Constructor below.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>sl3_Task</code> object</p>
    </div>
    <div id="constructor">
    <h2>Constructor</h2>
    


<p><code>make_sl3_Task(data, covariates, outcome = NULL, outcome_type = NULL, outcome_levels = NULL,
                      id = NULL, weights = NULL, offset = NULL, nodes = NULL, column_names = NULL,
                      folds = NULL, drop_missing_outcome = FALSE, flag = TRUE)</code></p>
<dl><dt><code>data</code></dt>
<dd><p>A <code>data.frame</code> or <code>data.table</code> containing the analytic dataset.</p></dd>

<dt><code>covariates</code></dt>
<dd><p>A character vector of variable names that define the set of covariates.</p></dd>

<dt><code>outcome</code></dt>
<dd><p>A character vector of variable names that define the set of outcomes. Usually just one variable, although some learners support multivariate outcomes. Use <code>sl3_list_learners("multivariate_outcome")</code> to find such learners.</p></dd>

<dt><code>outcome_type</code></dt>
<dd><p>A <code>Variable_type</code> object that defines the variable type of the outcome. Alternatively, a character specifying such a type. See <code><a href="variable_type.html">variable_type</a></code> for details on defining variable types.</p></dd>

<dt><code>outcome_levels</code></dt>
<dd><p>A vector of levels expected for the outcome variable. If <code>outcome_type</code> is a character, this will be used to construct an appropriate <code><a href="variable_type.html">variable_type</a></code> object.</p></dd>

<dt><code>id</code></dt>
<dd><p>A character indicating which variable (if any) to be used as an identifier for independent observations, which would be necessary if there are clusters of dependent units in the data (e.g., repeated measures on the same individual). The <code>id</code> is used to define a clustered cross-validation scheme (if <code>folds</code> is not already supplied to <code>make_sl3_Task</code>), for learners that use cross-validation as part of their fitting procedure. Use <code>sl3_list_learners("ids")</code> to find learners whose fitting procedures support clustered observations, and use <code>sl3_list_learners("cv")</code> to find learners whose fitting procedures involve cross-validation.</p></dd>

<dt><code>weights</code></dt>
<dd><p>A character indicating which variable (if any) to be used as observation weights, for learners that support that. Use <code>sl3_list_learners("weights")</code> to find such learners.</p></dd>

<dt><code>offset</code></dt>
<dd><p>A character indicating which variable (if any) to be used as an observation offset, for learners that support that.  Use <code>sl3_list_learners("offset")</code> to find such learners.</p></dd>

<dt><code>nodes</code></dt>
<dd><p>A list of character vectors as nodes. This will override the <code>covariates</code>, <code>outcome</code>, <code>id</code>, <code>weights</code>, and <code>offset</code> arguments if specified, serving as an alternative way to specify those arguments.</p></dd>

<dt><code>column_names</code></dt>
<dd><p>A named list of characters that maps between column names in <code>data</code> and how those variables are referenced in <code>sl3_Task</code> functions.</p></dd>

<dt><code>drop_missing_outcome</code></dt>
<dd><p>Logical indicating whether to drop outcomes that are missing.</p></dd>

<dt><code>flag</code></dt>
<dd><p>Logical indicating whether to notify the user when there are outcomes that are missing.</p></dd>

<dt><code>folds</code></dt>
<dd><p>An optional origami fold object, as generated by <code><a href="http://tlverse.org/origami/reference/make_folds.html" class="external-link">make_folds</a></code>, specifying a cross-validation scheme. If <code>NULL</code> (default), a V-fold cross-validation scheme with V = 10 will be considered for learners that use cross-validation as part of their fitting procedure. Also, if <code>NULL</code> (default) and <code>id</code> is specified, then a clustered V-fold cross-validation procedure with 10 folds will be considered. Use <code>sl3_list_learners("cv")</code> to find learners whose fitting procedures involve cross-validation.</p></dd>


</dl></div>
    <div id="methods">
    <h2>Methods</h2>
    


<dl><dt><code>add_interactions(interactions, warn_on_existing = TRUE)</code></dt>
<dd><p>Adds interaction terms to task, returns a task with interaction terms added to covariate list.</p>
<ul><li><p><code>interactions</code>: A list of lists, where each sublist describes one interaction term, listing the variables that comprise it</p></li>
<li><p><code>warn_on_existing</code>: If TRUE, produce a warning if there is already a column with a name matching this interaction term</p></li>
</ul></dd>


<dt><code>add_columns(fit_uuid, new_data, global_cols=FALSE)</code></dt>
<dd><p>Add columns to internal data, returning an updated vector of <code>column_names</code></p>
<ul><li><p><code>fit_uuid</code>: A uuid character that is used to generate unique internal column names.
This prevents two added columns with the same name overwriting each other, provided they have different fit_uuid.</p></li>
<li><p><code>new_data</code>: A data.table containing the columns to add</p></li>
<li><p><code>global_cols</code>: If true, don't use the fit_uuid to make unique column names</p></li>
</ul></dd>

<dt><code>next_in_chain(covariates=NULL, outcome=NULL, id=NULL, weights=NULL,
                                    offset=NULL, column_names=NULL, new_nodes=NULL, ...)</code></dt>
<dd><p>Used by learner$chain methods to generate a task with the same underlying data, but redefined nodes.
Most of the parameter values are passed to the <code>sl3_Task</code> constructor, documented above.</p>
<ul><li><p><code>covariates</code>: An updated covariates character vector</p></li>
<li><p><code>outcome</code>: An updated outcome character vector</p></li>
<li><p><code>id</code>: An updated id character value</p></li>
<li><p><code>weights</code>: An updated weights character value</p></li>
<li><p><code>offset</code>: An updated offset character value</p></li>
<li><p><code>column_names</code>: An updated column_names character vector</p></li>
<li><p><code>new_nodes</code>: An updated list of node names</p></li>
<li><p><code>...</code>: Other arguments passed to the <code>sl3_Task</code> constructor for the new task</p></li>
</ul></dd>


<dt><code>subset_task(row_index)</code></dt>
<dd><p>Returns a task with rows subsetted using the <code>row_index</code> index vector</p>
<ul><li><p><code>row_index</code>: An index vector defining the subset</p></li>
</ul></dd>


<dt><code>get_data(rows, columns)</code></dt>
<dd><p>Returns a <code>data.table</code> containing a subset of task data.</p>
<ul><li><p><code>rows</code>: An index vector defining the rows to return</p></li>
</ul><ul><li><p><code>columns</code>: A character vector of columns to return.</p></li>
</ul></dd>

<dt><code>has_node(node_name)</code></dt>
<dd><p>Returns true if the node is defined in the task</p>
<ul><li><p><code>node_name</code>: The name of the node to look for</p></li>
</ul></dd>


<dt><code>get_node(node_name, generator_fun=NULL)</code></dt>
<dd><p>Returns a ddta.table with the requested node's data</p>
<ul><li><p><code>node_name</code>: The name of the node to look for</p></li>
<li><p><code>generator_fun</code>: A <code>function(node_name, n)</code> that can generate the node if it was not specified in the task.</p></li>
</ul></dd>



</dl></div>
    <div id="fields">
    <h2>Fields</h2>
    

<dl><dt><code>raw_data</code></dt>
<dd><p>Internal representation of the data</p></dd>

<dt><code>data</code></dt>
<dd><p>Formatted task data</p></dd>

<dt><code>nrow</code></dt>
<dd><p>Number of observations</p></dd>

<dt><code>nodes</code></dt>
<dd><p>A list of node variables</p></dd>

<dt><code>X</code></dt>
<dd><p>a data.table containing the covariates</p></dd>

<dt><code>X</code></dt>
<dd><p>a data.table containing the covariates and an intercept term</p></dd>

<dt><code>Y</code></dt>
<dd><p>a vector containing the outcomes</p></dd>

<dt><code>offsets</code></dt>
<dd><p>a vector containing the offset. Will return an error if the offset wasn't specified on construction</p></dd>

<dt><code>weights</code></dt>
<dd><p>a vector containing the observation weights. If weights aren't specified on construction, weights will default to 1</p></dd>

<dt><code>id</code></dt>
<dd><p>a vector containing the observation units. If the ids aren't specified on construction, id will return seq_len(nrow)</p></dd>

<dt><code>folds</code></dt>
<dd><p>An origami fold object, as generated by <code><a href="http://tlverse.org/origami/reference/make_folds.html" class="external-link">make_folds</a></code>, specifying a cross-validation scheme</p></dd>

<dt><code>uuid</code></dt>
<dd><p>A unique identifier of this task</p></dd>

<dt><code>column_names</code></dt>
<dd><p>The named list mapping variable names to internal column names</p></dd>

<dt><code>outcome_type</code></dt>
<dd><p>A <code><a href="variable_type.html">variable_type</a></code> object specifying the type of the outcome</p></dd>


</dl></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jeremy Coyle, Nima Hejazi, Oleg Sofrygin, Ivana Malenica, Rachael Phillips.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

