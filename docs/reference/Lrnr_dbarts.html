<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Discrete Bayesian Additive Regression Tree sampler — Lrnr_dbarts • sl3</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Discrete Bayesian Additive Regression Tree sampler — Lrnr_dbarts" />
<meta property="og:description" content="This learner implements BART algorithm in C++, using the dbarts package.
BART is a Bayesian sum-of-trees model in which each tree is constrained
by a prior to be a weak learner." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115145808-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115145808-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sl3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="https://tlverse.org">tlverse</a>
</li>
<li>
  <a href="../index.html">sl3</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro_sl3.html">Intro to sl3</a>
    </li>
    <li>
      <a href="../articles/SuperLearner_benchmarks.html">sl3 Benchmarks</a>
    </li>
    <li>
      <a href="../slides/sl3-slides.html">sl3 Presentation</a>
    </li>
    <li>
      <a href="../articles/custom_lrnrs.html">Defining Custom sl3 Learners</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/tlverse/sl3/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Discrete Bayesian Additive Regression Tree sampler</h1>
    <small class="dont-index">Source: <a href='https://github.com/tlverse/sl3/blob/master/R/Lrnr_dbarts.R'><code>R/Lrnr_dbarts.R</code></a></small>
    <div class="hidden name"><code>Lrnr_dbarts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This learner implements BART algorithm in C++, using the <code>dbarts</code> package.
BART is a Bayesian sum-of-trees model in which each tree is constrained
by a prior to be a weak learner.</p>
    </div>



    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p><code>R6Class</code> object.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Learner object with methods for training and prediction. See
<code><a href='Lrnr_base.html'>Lrnr_base</a></code> for documentation on learners.</p>
    <h2 class="hasAnchor" id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h2>

    

<dl>
<dt><code>x.test</code></dt><dd><p>Explanatory variables for test (out of sample) data.
<code>bart</code> will generate draws of \(f(x)\) for each \(x\) which is a
row of <code>x.test</code>.</p></dd>
<dt><code>sigest</code></dt><dd><p>For continuous response models, an estimate of the
error variance, \(\sigma^2\), used to calibrate an inverse-chi-squared
prior used on that parameter. If not supplied, the least-squares estimate
is derived instead. See <code>sigquant</code> for more information. Not
applicable when \(y\) is binary.</p></dd>
<dt><code>sigdf</code></dt><dd><p>Degrees of freedom for error variance prior. Not
applicable when \(y\) is binary.</p></dd>
<dt><code>sigquant</code></dt><dd><p>The quantile of the error variance prior that the
rough estimate (<code>sigest</code>) is placed at. The closer the quantile is
to 1, the more aggresive the fit will be as you are putting more prior
weight on error standard deviations (\(\sigma\)) less than the rough
estimate. Not applicable when \(y\) is binary.</p></dd>
<dt><code>k</code></dt><dd><p>For numeric \(y\), <code>k</code> is the number of prior
standard deviations \(E(Y|x) = f(x)\) is away from \(\pm 0.5\). The response (<code>y.train</code>) is internally scaled to range from
\(-0.5\) to \(0.5\). For binary \(y\), <code>k</code> is the number of
prior standard deviations \(f(x)\) is away from \(\pm 3\). In
both cases, the bigger \(k\) is, the more conservative the fitting will
be.</p></dd>
<dt><code>power</code></dt><dd><p>Power parameter for tree prior.</p></dd>
<dt><code>base</code></dt><dd><p>Base parameter for tree prior.</p></dd>
<dt><code>binaryOffset</code></dt><dd><p>sed for binary \(y\). When present, the model
is \(P(Y = 1 \mid x) = \Phi(f(x) + \mathrm{binaryOffset})\), allowing fits with probabilities shrunk
towards values other than \(0.5\).</p></dd>
<dt><code>weights</code></dt><dd><p>An optional vector of weights to be used in the
fitting process. When present, BART fits a model with observations
\(y \mid x \sim N(f(x), \sigma^2 / w)\),
where \(f(x)\) is the unknown function.</p></dd>
<dt><code>ntree</code></dt><dd><p>The number of trees in the sum-of-trees formulation.</p></dd>
<dt><code>ndpost</code></dt><dd><p>The number of posterior draws after burn in,
<code>ndpost / keepevery</code> will actually be returned.</p></dd>
<dt><code>nskip</code></dt><dd><p>Number of MCMC iterations to be treated as burn in.</p></dd>
<dt><code>printevery</code></dt><dd><p>As the MCMC runs, a message is printed every
<code>printevery</code> draws.</p></dd>
<dt><code>keepevery</code></dt><dd><p>Every <code>keepevery</code> draw is kept to be returned
to the user. Useful for &#8220;thinning&#8221; samples.</p></dd>
<dt><code>keeptrainfits</code></dt><dd><p>If <code>TRUE</code> the draws of \(f(x)\) for
\(x\) corresponding to the rows of <code>x.train</code> are returned.</p></dd>
<dt><code>usequants</code></dt><dd><p>When <code>TRUE</code>, determine tree decision rules
using estimated quantiles derived from the <code>x.train</code> variables. When
<code>FALSE</code>, splits are determined using values equally spaced across
the range of a variable. See details for more information.</p></dd>
<dt><code>numcut</code></dt><dd><p>The maximum number of possible values used in decision
rules (see <code>usequants</code>, details). If a single number, it is recycled
for all variables; otherwise must be a vector of length equal to
<code><a href='https://rdrr.io/r/base/nrow.html'>ncol(x.train)</a></code>. Fewer rules may be used if a covariate lacks enough
unique values.</p></dd>
<dt><code>printcutoffs</code></dt><dd><p>The number of cutoff rules to printed to screen
before the MCMC is run. Given a single integer, the same value will be
used for all variables. If 0, nothing is printed.</p></dd>
<dt><code>verbose</code></dt><dd><p>Logical; if <code>FALSE</code> supress printing.</p></dd>
<dt><code>nchain</code></dt><dd><p>Integer specifying how many independent tree sets and
fits should be calculated.</p></dd>
<dt><code>nthread</code></dt><dd><p>Integer specifying how many threads to use. Depending
on the CPU architecture, using more than the number of chains can degrade
performance for small/medium data sets. As such some calculations may be
executed single threaded regardless.</p></dd>
<dt><code>combinechains</code></dt><dd><p>Logical; if <code>TRUE</code>, samples will be
returned in arrays of dimensions equal to <code>nchain</code> \(\times\)
<code>ndpost</code> \(\times\) number of observations.</p></dd>
<dt><code>keeptrees</code></dt><dd><p>Logical; must be <code>TRUE</code> in order to use
<code>predict</code> with the result of a <code>bart</code> fit.</p></dd>
<dt><code>keepcall</code></dt><dd><p>Logical; if <code>FALSE</code>, returned object will have
<code>call</code> set to <code><a href='https://rdrr.io/r/base/call.html'>call("NULL")</a></code>, otherwise the call used to
instantiate BART.</p></dd>
<dt><code>serializeable</code></dt><dd><p>Logical; if <code>TRUE</code>, loads the trees into R memory
so the fit object can be saved and loaded. See the section on "Saving"
in <code><a href='https://rdrr.io/pkg/dbarts/man/bart.html'>bart</a> NB: This is not currently working</code></p></dd>

</dl>

    <h2 class="hasAnchor" id="common-parameters"><a class="anchor" href="#common-parameters"></a>Common Parameters</h2>

    


<p>Individual learners have their own sets of parameters. Below is a list of shared parameters, implemented by <code>Lrnr_base</code>, and shared
by all learners.</p>
<dl>
<dt><code>covariates</code></dt><dd><p>A character vector of covariates. The learner will use this to subset the covariates for any specified task</p></dd>
<dt><code>outcome_type</code></dt><dd><p>A <code><a href='Variable_Type.html'>variable_type</a></code> object used to control the outcome_type used by the learner. Overrides the task outcome_type if specified</p></dd>
<dt><code>...</code></dt><dd><p>All other parameters should be handled by the invidual learner classes. See the documentation for the learner class you're instantiating</p></dd>

</dl>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other Learners: 
<code><a href='Custom_chain.html'>Custom_chain</a></code>,
<code><a href='Lrnr_HarmonicReg.html'>Lrnr_HarmonicReg</a></code>,
<code><a href='Lrnr_arima.html'>Lrnr_arima</a></code>,
<code><a href='Lrnr_bartMachine.html'>Lrnr_bartMachine</a></code>,
<code><a href='Lrnr_base.html'>Lrnr_base</a></code>,
<code><a href='Lrnr_bayesglm.html'>Lrnr_bayesglm</a></code>,
<code><a href='Lrnr_bilstm.html'>Lrnr_bilstm</a></code>,
<code><a href='Lrnr_caret.html'>Lrnr_caret</a></code>,
<code><a href='Lrnr_cv_selector.html'>Lrnr_cv_selector</a></code>,
<code><a href='Lrnr_cv.html'>Lrnr_cv</a></code>,
<code><a href='Lrnr_define_interactions.html'>Lrnr_define_interactions</a></code>,
<code><a href='Lrnr_density_discretize.html'>Lrnr_density_discretize</a></code>,
<code><a href='Lrnr_density_hse.html'>Lrnr_density_hse</a></code>,
<code><a href='Lrnr_density_semiparametric.html'>Lrnr_density_semiparametric</a></code>,
<code><a href='Lrnr_earth.html'>Lrnr_earth</a></code>,
<code><a href='Lrnr_expSmooth.html'>Lrnr_expSmooth</a></code>,
<code><a href='Lrnr_gam.html'>Lrnr_gam</a></code>,
<code><a href='Lrnr_gbm.html'>Lrnr_gbm</a></code>,
<code><a href='Lrnr_glm_fast.html'>Lrnr_glm_fast</a></code>,
<code><a href='Lrnr_glmnet.html'>Lrnr_glmnet</a></code>,
<code><a href='Lrnr_glm.html'>Lrnr_glm</a></code>,
<code><a href='Lrnr_grf.html'>Lrnr_grf</a></code>,
<code><a href='Lrnr_gru_keras.html'>Lrnr_gru_keras</a></code>,
<code><a href='Lrnr_gts.html'>Lrnr_gts</a></code>,
<code><a href='Lrnr_h2o_grid.html'>Lrnr_h2o_grid</a></code>,
<code><a href='Lrnr_hal9001.html'>Lrnr_hal9001</a></code>,
<code><a href='Lrnr_haldensify.html'>Lrnr_haldensify</a></code>,
<code><a href='Lrnr_hts.html'>Lrnr_hts</a></code>,
<code><a href='Lrnr_independent_binomial.html'>Lrnr_independent_binomial</a></code>,
<code><a href='Lrnr_lightgbm.html'>Lrnr_lightgbm</a></code>,
<code><a href='Lrnr_lstm_keras.html'>Lrnr_lstm_keras</a></code>,
<code><a href='Lrnr_mean.html'>Lrnr_mean</a></code>,
<code><a href='Lrnr_multiple_ts.html'>Lrnr_multiple_ts</a></code>,
<code><a href='Lrnr_multivariate.html'>Lrnr_multivariate</a></code>,
<code><a href='Lrnr_nnet.html'>Lrnr_nnet</a></code>,
<code><a href='Lrnr_nnls.html'>Lrnr_nnls</a></code>,
<code><a href='Lrnr_optim.html'>Lrnr_optim</a></code>,
<code><a href='Lrnr_pca.html'>Lrnr_pca</a></code>,
<code><a href='Lrnr_pkg_SuperLearner.html'>Lrnr_pkg_SuperLearner</a></code>,
<code><a href='Lrnr_polspline.html'>Lrnr_polspline</a></code>,
<code><a href='Lrnr_pooled_hazards.html'>Lrnr_pooled_hazards</a></code>,
<code><a href='Lrnr_randomForest.html'>Lrnr_randomForest</a></code>,
<code><a href='Lrnr_ranger.html'>Lrnr_ranger</a></code>,
<code><a href='Lrnr_revere_task.html'>Lrnr_revere_task</a></code>,
<code><a href='Lrnr_rpart.html'>Lrnr_rpart</a></code>,
<code><a href='Lrnr_rugarch.html'>Lrnr_rugarch</a></code>,
<code><a href='Lrnr_screener_augment.html'>Lrnr_screener_augment</a></code>,
<code><a href='Lrnr_screener_coefs.html'>Lrnr_screener_coefs</a></code>,
<code><a href='Lrnr_screener_correlation.html'>Lrnr_screener_correlation</a></code>,
<code><a href='Lrnr_screener_importance.html'>Lrnr_screener_importance</a></code>,
<code><a href='Lrnr_sl.html'>Lrnr_sl</a></code>,
<code><a href='Lrnr_solnp_density.html'>Lrnr_solnp_density</a></code>,
<code><a href='Lrnr_solnp.html'>Lrnr_solnp</a></code>,
<code><a href='Lrnr_stratified.html'>Lrnr_stratified</a></code>,
<code><a href='Lrnr_subset_covariates.html'>Lrnr_subset_covariates</a></code>,
<code><a href='Lrnr_svm.html'>Lrnr_svm</a></code>,
<code><a href='Lrnr_tsDyn.html'>Lrnr_tsDyn</a></code>,
<code><a href='Lrnr_ts_weights.html'>Lrnr_ts_weights</a></code>,
<code><a href='Lrnr_xgboost.html'>Lrnr_xgboost</a></code>,
<code><a href='Pipeline.html'>Pipeline</a></code>,
<code><a href='Stack.html'>Stack</a></code>,
<code><a href='define_h2o_X.html'>define_h2o_X</a>()</code>,
<code><a href='undocumented_learner.html'>undocumented_learner</a></code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jeremy Coyle, Nima Hejazi, Oleg Sofrygin, Ivana Malenica, Rachael Phillips.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


